;
; time delay.asm
;
; Created: 16-05-2020 09:06:40
; Author : Shri
;


.INCLUDE "M32DEF.INC"

.MACRO INITSTACK

  LDI R20,HIGH(RAMEND)
  OUT SPH,R20
  LDI R20,LOW(RAMEND)
  OUT SPL,R20

  .ENDMACRO

  INITSTACK

   LDI R16,1<<5
   SBI DDRB,5
   LDI R17,0
   OUT PORTB,R17

RPT: RCALL DELAY
   EOR R17,R16
   OUT PORTB,R17
   RJMP RPT

DELAY:
     LDI R20,0xF1
	 OUT TCNT0,R20
	 LDI R20,0x03
	 OUT TCCR0,R20

AGAIN:IN R20 ,TIFR
	 SBRS R20,TOV0
	 RJMP AGAIN
	 LDI R20,0x00
	 OUT TCCR0,R20
	 LDI R20,1<<TOV0
	 OUT TIFR,R20
	 RET

	 .EXIT