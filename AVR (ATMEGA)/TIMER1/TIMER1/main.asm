;
; TIMER1.asm
;
; Created: 19-05-2020 22:39:27
; Author : Shri
;

.INCLUDE "M32DEF.INC"


 .ORG $0

 SBI DDRB,5
 BEGIN: SBI PORTB,5
 RCALL DELAY
 CBI PORTB,5
 RCALL DELAY
 RJMP BEGIN

 DELAY:
       LDI R20,0x00
	   OUT TCNT1H,R20
	   OUT TCNT1L,R20

	   LDI R20,HIGH(8000-1)
	   OUT OCR1AH,R20
	   LDI R20,LOW(8000-1)
	   OUT OCR1AL,R20

	   LDI R20,0x00
	   OUT TCCR1A,R20
	   LDI R20,0x09
	   OUT TCCR1B,R20

AGAIN:

	    IN R20,TIFR
		SBRS R20,OCF1A
		RJMP AGAIN
		LDI R20,1<<OCF1A
		OUT TIFR,R20
		LDI R19,0
		OUT TCCR1B,R19
		OUT TCCR1A,R19
		RET

		.EXIT





